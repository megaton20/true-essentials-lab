<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Attendance Tracker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/style.css">
</head>

<body>

  <div class="container-fluid vh-100">
    <div class="row h-100">
      <!-- left side nav -->

      <%-include('./partials/sidenav')%>

      <div class=" border bg-white col-md-10">
            <!-- top info -->
        <div class=" mt-2 mb-2">
          <div class="row">
            <div class="col-10">
              <a href="/admin"> back</a>
            </div>
            <div class="col-2">
                    <button class=" btn btn-primary me-2" data-bs-toggle="modal" data-bs-target="#createClassModal">
                      <i class="fas fa-plus"></i> Create Class
                    </button>  
          
            </div>

             <%- include('../partials/messages') %>
          </div>
          <!-- top info ends -->
        </div>

              <section class=" mt-5">
                <p>Class</p>
  
                    <div class=" mb-5">

                      <div class="row">
                       <%classes.forEach(function(data,index) {%>
                     <div class="col-md-3 mb-3">
                      <div class="week-item class-card status-upcoming d-flex flex-column justify-content-between p-3">
                        
                        <!-- Top Section: Status Badge -->
                        <div class="d-flex justify-content-between align-items-center mb-2">
                          <span class="status-badge">Active: <%= data.status %></span>
                        </div>

                        <!-- Middle Section: Title and Date -->
                        <div class="mb-2">
                          <p class="text-muted mb-1 text-truncate" title="<%= data.title %>"><%= data.title %></p>
                          <p class="text-muted mb-0" style="font-size: 11px;">
                            <%= data.scheduled_at.toLocaleString('en-US', {
                              year: 'numeric',
                              month: 'long',
                              day: 'numeric',
                              hour: 'numeric',
                              minute: '2-digit'
                            }) %>
                          </p>
                        </div>

                        <!-- Bottom Section: Action -->
                        <div>
                          <a href="/admin/class/<%= data.id %>" class="btn btn-sm btn-outline-secondary">View</a>
                        </div>

                      </div>
                    </div>

                      <%}) %>
                      

                      </div>

                    </div>

              </section>

    </div>

      <!-- Modal: Create Course -->
      <div class="modal fade" id="createClassModal" tabindex="-1" aria-labelledby="createClassModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <form class="modal-content" id="classForm" method="post" action="/admin/class">
            <div class="modal-header">
              <h5 class="modal-title" id="createClassModalLabel">Create New Class</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">

              <div class="mb-3">
                <label for="classTitle" class="form-label">Class Title</label>
                <input type="text" class="form-control" id="classTitle" name="title" required>
              </div>

              <div class="mb-3">
                <label for="classDesc" class="form-label">Description</label>
                <textarea class="form-control" id="classDesc" name="description" rows="3" required></textarea>
              </div>

              <div class="mb-3">
                <label for="scheduledAt" class="form-label">Scheduled Date & Time</label>
                <input type="datetime-local" class="form-control" id="scheduledAt" name="scheduled_at" required>
              </div>

              <div class="mb-3">
                <label for="meetLink" class="form-label">Meeting Link</label>
                <input type="url" class="form-control" id="meetLink" name="meet_link" placeholder="https://meet.example.com/class" required>
              </div>

            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
              <button type="submit" class="btn btn-primary"><i class="fas fa-plus-circle"></i> Create Class</button>
            </div>
          </form>
        </div>
      </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      const calendarHeader = document.getElementById('calendar-header');
      const calendarBody = document.getElementById('calendar-body');

      const now = new Date();
      const month = now.getMonth();
      const year = now.getFullYear();

      const monthNames = [
        'January', 'February', 'March', 'April', 'May', 'June',
        'July', 'August', 'September', 'October', 'November', 'December'
      ];

      function generateCalendar(month, year) {
        const firstDay = new Date(year, month, 1).getDay();
        const lastDate = new Date(year, month + 1, 0).getDate();
        const prevLastDate = new Date(year, month, 0).getDate();

        // Update header
        calendarHeader.innerHTML = `<h5 class="mb-0">${monthNames[month]} ${year}</h5>`;

        // Create weekday headers
        const weekdays = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
        let daysHTML = '<div class="d-flex flex-wrap justify-content-center">';
        weekdays.forEach(day => {
          daysHTML += `<div class="day text-muted">${day}</div>`;
        });

        // Add previous month's trailing days
        for (let i = firstDay - 1; i >= 0; i--) {
          daysHTML += `<div class="day text-muted other-month">${prevLastDate - i}</div>`;
        }

        // Add current month's days
        for (let i = 1; i <= lastDate; i++) {
          const isToday = (i === now.getDate() && month === now.getMonth() && year === now.getFullYear());
          daysHTML += `<div class="day ${isToday ? 'today' : ''}">${i}</div>`;
        }

        // Add trailing next month's days to complete rows
        const totalCells = firstDay + lastDate;
        const nextDays = (7 - (totalCells % 7)) % 7;
        for (let i = 1; i <= nextDays; i++) {
          daysHTML += `<div class="day text-muted other-month">${i}</div>`;
        }

        daysHTML += '</div>';
        calendarBody.innerHTML = daysHTML;
      }

      generateCalendar(month, year);
    </script>

</body>

</html>









 


