
 <style>
.takeaways-container .input-group-text {
  background-color: #f8f9fa;
  border-right: none;
}
.takeaways-container .form-control {
  border-left: none;
}
.modal-header {
  border-bottom: 2px solid #dee2e6;
}
.modal-footer {
  border-top: 1px solid #dee2e6;
}
.form-label {
  font-weight: 500;
  margin-bottom: 0.5rem;
}
</style>
<%-include('./partials/topnav') %>


  <!-- Sidebar -->
  <%-include('./partials/sidenav') %>

    <!-- Main Content -->
    <div class="container-fluid mt-4">
      <div class="row">
        <!-- Static Sidebar for desktop -->
        <div class="col-lg-3 d-none d-lg-block">
          <%-include('./partials/staticsidebar') %>
        </div>

        <!-- Main Dashboard Section -->
        <div class="col-lg-9">

          <main class="p-1">
            <div class="d-flex justify-content-between align-items-center mb-3">

              <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#referralModal">
                <i class="fas fa-code"></i> Generate Referral
              </button>

            <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#createWebinarModal">
              <i class="fas fa-video"></i> Create Webinar
            </button>

              <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#createCourseModal">
                <i class="fas fa-code"></i> Create Course
              </button>
            </div>
            <%- include('../partials/messages') %>
              <!-- Stats -->
              <div class="row g-3 mb-2">
                <div class="col-md-3">
                  <div class="bg-white p-3 rounded shadow-sm">
                    <h6>Users</h6>
                    <a href="/admin/users">
                      <%= stats.totalStudents %>
                    </a>
                  </div>
                </div>
                <div class="col-md-3">
                  <div class="bg-white p-3 rounded shadow-sm">
                    <h6>Pending Verification</h6>
                    <a href="/admin/users">
                      <%= stats.pendingVerifications %>
                    </a>
                  </div>
                </div>


                <div class="col-md-3">
                  <div class="bg-white p-3 rounded shadow-sm">
                    <h6>Total classes</h6>
                    <%= stats.totalClasses %>
                  </div>
                </div>
                <div class="col-md-3">
                  <div class="bg-white p-3 rounded shadow-sm">
                    <h6>Active Codes</h6>
                    <a href="/admin/referral">
                      <%= stats.activeCodes %>
                    </a>
                  </div>
                </div>
              </div>



              <div class="bg-white shadow-sm p-3 rounded mb-4">
                <h5>Courses overview</h5>
                <div class="row">
                  <% myCourse.forEach(function(data, index) { %>
                    <div class="col-md-6 col-lg-3 mb-3">
                      <div class="border p-3 rounded h-100 d-flex flex-column justify-content-between" data-aos="fade">

                        <!-- Middle Section: Title and Date -->
                        <div class="mb-2">
                          <p class="text-muted mb-1 text-truncate" title="<%= data.title %>">
                            <%= data.title %>
                          </p>
                          <p class="text-muted mb-0" style="font-size: 11px;">
                            <%= data.created_at.toLocaleString('en-US', { year: 'numeric' , month: 'long' ,
                              day: 'numeric' , hour: 'numeric' , minute: '2-digit' }) %>
                          </p>
                        </div>

                        <!-- Bottom Section: Action -->
                        <div>
                          <a href="/admin/courses/details/<%= data.id %>" class="btn btn-sm btn-outline-secondary">View
                            Details</a>
                          <a href="/admin/course/class/<%= data.id %>"
                            class="btn btn-sm btn-outline-secondary">Scheduled</a>
                        </div>
                      </div>
                    </div>
                    <% }) %>
                </div>
              </div>

          </main>

        </div>

      </div>
    </div>
    <!-- Create Course Modal -->
    <div class="modal fade" id="createCourseModal" tabindex="-1">
      <div class="modal-dialog">
        <form class="modal-content" method="POST" action="/admin/courses/create">
          <div class="modal-header">
            <h5 class="modal-title">Create New Course</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <div class="mb-3">
              <label class="form-label">Course Title</label>
              <input type="text" name="title" class="form-control" required />
            </div>

            <div class="mb-3">
              <label class="form-label">Category</label>
              <select name="category_id" class="form-select" id="edit-category" required>
                <% if (categories && categories.length> 0) { %>
                  <% categories.forEach(cat=> { %>
                    <option value="<%= cat.id %>">
                      <%= cat.name %>
                    </option>
                    <% }) %>
                      <% } else { %>
                        <option value="uncategorized">Uncategorized</option>
                        <% } %>
              </select>

            </div>

            <div class="mb-3">
              <label class="form-label">Level</label>
              <select name="level" class="form-select" id="edit-category" required>
                <option value="easy">easy</option>
                <option value="medium">medium</option>
                <option value="hard">Hard</option>
              </select>

            </div>


            <div class="mb-3">
              <label class="form-label">Course Description</label>
              <textarea name="description" rows="3" class="form-control" required></textarea>
            </div>

            <div class="mb-3">
              <label class="form-label">Take away</label>
              <input type="text" name="takeaways" class="form-control" placeholder="Enter takeaway 1" required />
              <input type="text" name="takeaways" class="form-control mt-2" placeholder="Enter takeaway 2" required />
              <input type="text" name="takeaways" class="form-control mt-2" placeholder="Enter takeaway 3" required />
            </div>


          </div>
          <div class="modal-footer">
            <button class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-primary"><i class="fas fa-plus-circle"></i> Create Course</button>
          </div>
        </form>
      </div>
    </div>


    <!-- Referral Modal -->
    <div class="modal fade" id="referralModal" tabindex="-1">
      <div class="modal-dialog">
        <form class="modal-content" method="post" action="/admin/referral">
          <div class="modal-header">
            <h5 class="modal-title">Generate Referral Code</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <div class="mb-3"><label class="form-label">Referral Code</label><input type="text" name="code"
                class="form-control" required /></div>
            <div class="mb-3"><label class="form-label">Location</label><input type="text" name="location"
                class="form-control" required /></div>
            <div class="mb-3"><label class="form-label">Discount (%)</label><input type="number" name="discount"
                class="form-control" /></div>
            <div class="mb-3"><label class="form-label">Max Users</label><input type="number" name="maxUses"
                class="form-control" /></div>
            <div class="mb-3"><label class="form-label">Expiry Date</label><input type="date" name="expire"
                class="form-control" /></div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-success"><i class="fas fa-magic"></i> Generate</button>
          </div>
        </form>
      </div>
    </div>


    <div class="modal fade" id="createWebinarModal" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <form class="modal-content" method="POST" action="/admin/webinars/create">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title"><i class="fas fa-video me-2"></i>Schedule New Webinar</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <div class="row">
          <!-- Left Column -->
          <div class="col-md-6">
            <div class="mb-3">
              <label class="form-label">Webinar Title</label>
              <div class="input-group">
                <span class="input-group-text"><i class="fas fa-heading"></i></span>
                <input type="text" name="title" class="form-control" placeholder="Enter webinar title" required />
              </div>
            </div>

            <div class="mb-3">
              <label class="form-label">Presenter Name</label>
              <div class="input-group">
                <span class="input-group-text"><i class="fas fa-user"></i></span>
                <input type="text" name="presenter_name" class="form-control" placeholder="Presenter's full name" required />
              </div>
            </div>

            <div class="mb-3">
              <label class="form-label">Presenter Credentials</label>
              <div class="input-group">
                <span class="input-group-text"><i class="fas fa-graduation-cap"></i></span>
                <input type="text" name="presenter_credentials" class="form-control" placeholder="e.g., PhD, Certified Expert, etc." />
              </div>
            </div>

            <div class="mb-3">
              <label class="form-label">Scheduled Date & Time</label>
              <div class="input-group">
                <span class="input-group-text"><i class="fas fa-calendar-alt"></i></span>
                <input type="datetime-local" name="scheduled_date" class="form-control" required />
              </div>
            </div>
          </div>

          <!-- Right Column -->
          <div class="col-md-6">
            <div class="mb-3">
              <label class="form-label">Duration (minutes)</label>
              <div class="input-group">
                <span class="input-group-text"><i class="fas fa-clock"></i></span>
                <input type="number" name="duration_minutes" class="form-control" value="60" min="15" max="240" required />
              </div>
            </div>

            <div class="mb-3">
              <label class="form-label">Maximum Attendees</label>
              <div class="input-group">
                <span class="input-group-text"><i class="fas fa-users"></i></span>
                <input type="number" name="max_attendees" class="form-control" placeholder="Leave empty for unlimited" min="1" />
              </div>
            </div>

            <div class="mb-3">
              <label class="form-label">Meeting URL</label>
              <div class="input-group">
                <span class="input-group-text"><i class="fas fa-link"></i></span>
                <input type="url" name="meeting_url" class="form-control" placeholder="Zoom, Teams, or other meeting link" />
              </div>
            </div>

            <div class="mb-3">
              <label class="form-label">Thumbnail URL</label>
              <div class="input-group">
                <span class="input-group-text"><i class="fas fa-image"></i></span>
                <input type="url" name="thumbnail_url" class="form-control" placeholder="Link to webinar thumbnail image" />
              </div>
            </div>
          </div>
        </div>

        <!-- Full Width Fields -->
        <div class="row">
          <div class="col-12">
            <div class="mb-3">
              <label class="form-label">Webinar Description</label>
              <textarea name="description" rows="4" class="form-control" placeholder="Detailed description of the webinar content, learning objectives, and key topics..." required></textarea>
            </div>

            <div class="mb-3">
              <label class="form-label">Initial Status</label>
              <div class="input-group">
                <span class="input-group-text"><i class="fas fa-info-circle"></i></span>
                <select name="status" class="form-select" required>
                  <option value="scheduled" selected>Scheduled</option>
                  <option value="draft">Draft</option>
                  <option value="cancelled">Cancelled</option>
                </select>
              </div>
            </div>

            <!-- Key Takeaways Section -->
            <div class="mb-3">
              <label class="form-label fw-bold">What attendees will learn</label>
              <div class="takeaways-container">
                <div class="input-group mb-2">
                  <span class="input-group-text"><i class="fas fa-check text-success"></i></span>
                  <input type="text" name="takeaways" class="form-control" placeholder="Key learning point 1" required />
                </div>
                <div class="input-group mb-2">
                  <span class="input-group-text"><i class="fas fa-check text-success"></i></span>
                  <input type="text" name="takeaways" class="form-control" placeholder="Key learning point 2" required />
                </div>
                <div class="input-group mb-2">
                  <span class="input-group-text"><i class="fas fa-check text-success"></i></span>
                  <input type="text" name="takeaways" class="form-control" placeholder="Key learning point 3" required />
                </div>
              </div>
              <small class="text-muted">Add 3-5 key takeaways that attendees will gain from this webinar</small>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
          <i class="fas fa-times me-1"></i> Cancel
        </button>
        <button type="submit" class="btn btn-primary">
          <i class="fas fa-calendar-plus me-1"></i> Schedule Webinar
        </button>
      </div>
    </form>
  </div>
</div>

